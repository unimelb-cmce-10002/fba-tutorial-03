<!-- question-type: prepare -->
### Exercise 3: The Price - Distance Relationship

By the end of this exercise, your plot should look similar to this one:

```{r}
#| fig-width: 5
#| fig-height: 5
#| fig-align: "center"
#| echo: false
ggplot(housing, 
       aes(x = distance, y = price)
       ) +
    geom_point(alpha = 0.05) +
    geom_smooth(method = "lm",
                se = FALSE, 
                linewidth = 1
                ) +
    scale_y_continuous(labels = scales::dollar) +
    labs(x = "Distance to CBD (km)", 
         y = "Price", 
         title = "Dwelling Price vs. Distance"
         )
```
**(a).** Why might we expect a relationship between price and distance to the CBD?

**(b).** Use the starter code below to build a scatter plot of **price vs. distance**, replacing `YOUR_VARIABLE_NAME` with the correct column names.

::: {.callout-tip title="What is a Scatter Plot?" collapse=true}
A **scatter plot** is used to visualize the relationship between two continuous variables by plotting individual data points. Each dot represents one observation, helping identify **patterns, clusters, and trends**. In this case, it allows us to explore how **house prices change with distance**.
:::

```{r}
#| eval: false
ggplot(housing, 
       aes(x = YOUR_VARIABLE_NAME, y = YOUR_VARIABLE_NAME)
       ) +
    geom_point()
```

**(c).** Since we have a large number of data points, many overlap, making it difficult to distinguish individual observations. Modify the `geom_point()` function to reduce over-plotting by adjusting the `alpha` value. Experiment with different values (e.g., 0.1, 0.05, 0.01) and describe how each affects the visualization.

```{r}
#| eval: false
ggplot(housing, 
       aes(x = YOUR_VARIABLE_NAME, y = YOUR_VARIABLE_NAME)
       ) +
    geom_point(alpha = YOUR_NUMBER)
```

**(d).** We can better understand the relationship by adding a statistical transformation to the plot. Complete the `geom_smooth()` function call to overlay a straight line over the data. The `se = FALSE` argument removes the confidence interval around the line.

```{r}
#| eval: false
ggplot(housing, 
       aes(x = YOUR_VARIABLE_NAME, 
           y = YOUR_VARIABLE_NAME)
       ) +
    geom_point(alpha = YOUR_NUMBER) +
    geom_smooth(method = YOUR_METHOD, 
                se = FALSE)
```

**(e).** Finally, add labels to the x-axis, y-axis, and title using the `labs()` function. Adjust the x- and y-axis scales as you deem appropriate.

```{r}
#| eval: false
ggplot(housing, 
       aes(x = YOUR_VARIABLE_NAME, y = YOUR_VARIABLE_NAME)
       ) +
    geom_point(alpha = YOUR_NUMBER) +
    geom_smooth(method = YOUR_METHOD, 
                se = FALSE) +
    scale_y_continuous(YOUR_CODE) +
    labs(x = "YOUR_LABEL", 
         y = "YOUR_LABEL", 
         title = "YOUR_TITLE"
         )
```

**(f).** What does the scatter plot reveal about the relationship between house prices and distance to the CBD? How does the line help interpret this relationship?


<!-- BEGIN PROFILE:r-teaching-guide -->
::: {.content-visible when-profile="r-teaching-guide"}

::: {.teaching-block}

::: {.teaching-block-header}
Teaching Note
:::

::: {.teaching-block-body}

üéØ **Learning Objective** 
Students should:

- Create scatter plots to visualize the relationship between two continuous variables
- Use transparency (alpha) to manage overplotting in large datasets
- Add and interpret linear trend lines using geom_smooth(method = "lm")
- Format numeric axes appropriately for financial data
- Begin interpreting direction, strength, and limitations of observed relationships in data


‚úÖ   **Core Concepts to Highlight**

- Scatter plots are best for showing relationships between two numeric variables
- Overplotting can obscure patterns ‚Äî using alpha makes dense regions clearer
- `geom_smooth(method = "lm")` fits a linear regression line; se = FALSE hides the shaded confidence interval
- `scale_y_continuous(labels = scales::dollar)` improves interpretability for financial values
- The slope of the trend line shows direction of relationship; scatter around the line shows noise or variation
- The presence of outliers and spread highlights the limits of simple models and invites discussion of omitted variables

üí¨ **Suggested In-Class Prompts** (if needed)

‚ÄúWhat are some reasons that a distant home might still have a high price?‚Äù

‚ÄúWhat are we missing if we just look at this linear trend?‚Äù

‚ÄúCould this relationship be non-linear? How would you test that?‚Äù

‚ÄúWhat variables might improve our understanding if added to the model?‚Äù

üìå **Common Misunderstandings**

- Assuming the linear line implies causality ‚Äî clarify it‚Äôs descriptive, not causal
- Not understanding what geom_smooth(method = "lm") does ‚Äî thinking it's a smoothing curve by default
- Misinterpreting the spread as measurement error rather than unobserved heterogeneity
- Thinking the relationship is strong just because the trend line is visible ‚Äî encourage students to consider variance and outliers


:::

:::

:::
<!-- END PROFILE:r-teaching-guide -->

<!-- BEGIN PROFILE:r-solutions -->
::: {.content-visible when-profile="r-solutions" when-profile="r-teaching-guide"}

::: {.solution-block}

::: {.solution-block-header}
Solution
:::

::: {.solution-block-body}

**(a). Why might we expect a relationship between price and distance to the CBD?**

In most cities, being closer to the Central Business District (CBD) is associated with higher property prices due to:

- Better access to jobs, transport, and amenities
- Scarcity of land and high demand in central locations
- Prestige or desirability of inner-city living

As distance from the CBD increases, we often expect prices to fall ‚Äî although this relationship may not be perfectly linear due to other factors like transport links, school zones, or regional variation.

**(b)**

```{r}
ggplot(housing, 
       aes(x = distance, y = price)
       ) +
    geom_point()
```

**(c)**

```{r}
ggplot(housing, 
       aes(x = distance, y = price)
       ) +
    geom_point(alpha = 0.05)
```

Notes:

- alpha = 0.1: Points are semi-transparent ‚Äî overlap is reduced but still busy.
- alpha = 0.05: Good balance ‚Äî dense regions become visibly darker.
- alpha = 0.01: Almost all points are extremely faint; hard to see sparsely populated areas.

Lower alpha values reduce overplotting and help reveal density of data in crowded areas.

**(d)** 

```{r}
ggplot(housing, 
       aes(x = distance, y = price)
       ) +
    geom_point(alpha = 0.05) +
    geom_smooth(method = "lm", se = FALSE)
```

This adds a linear regression line, helping us see the overall trend in how price changes with distance.

**(e)**

```{r}
ggplot(housing, 
       aes(x = distance, y = price)
       ) +
    geom_point(alpha = 0.05) +
    geom_smooth(method = "lm", se = FALSE, linewidth = 1) +
    scale_y_continuous(labels = scales::dollar) +
    labs(
        x = "Distance to CBD (km)", 
        y = "Price", 
        title = "House Price vs. Distance"
    )
```


**(f)**
(f). What does the scatter plot reveal?
The scatter plot shows a negative relationship between distance from the CBD and house price:

- As distance increases, price tends to decrease
- This is visible in the downward slope of the linear trend line
- There‚Äôs also substantial variation in prices at all distances ‚Äî distance is a strong predictor, but not the only factor
- The line helps summarize the average trend, even in the presence of noisy data
- This supports the idea that proximity to the CBD carries a price premium, though other drivers of housing value are clearly at play

:::

:::

:::
<!-- END PROFILE:r-solutions -->