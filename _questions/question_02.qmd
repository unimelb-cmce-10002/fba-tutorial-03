<!-- question-type: prepare -->
### Exercise 2: Visualizing the distribution of Prices by Dwelling Type

By the end of this exercise, your plot should look similar to this one:

```{r}
#| fig-width: 5
#| fig-height: 5
#| fig-align: "center"
#| echo: false

housing |>
    ggplot(aes(x = price, 
               fill = type)
           ) +
    geom_histogram(bins = 50) +
    # Natural log scale for x-axis with meaningful breaks
    scale_x_continuous(
        labels = scales::dollar,
    ) +
    labs(x = "Price", 
         y = "Density within Type", 
         title = "Prices by Dwelling Type"
         ) + 
    theme(
        axis.text.x = element_text(angle = 55, hjust = 1),
    ) +
    facet_wrap(~ type)
```

**(a).** Why is a histogram useful for understanding price distributions? What insights can we gain from plotting price distributions separately for each dwelling type?

:::{.callout-tip title="What is a Histogram?" collapse=true}
A **histogram** is a visualization that represents the **distribution of numerical data** by dividing values into bins and counting the number of observations in each bin. Unlike a bar plot, which displays **categorical data**, a histogram is used for **continuous variables** like price, age, or distance.

Histograms help identify **patterns** in data, such as **skewness, outliers, and central tendencies**, making them a crucial tool for understanding how values are distributed in a dataset.
:::


**(b).** Use the starter code below to create a basic histogram of house prices. Replace `YOUR_VARIABLE_NAME` with the correct variable.

```{r}
#| eval: false
ggplot(housing, 
       aes(x = YOUR_VARIABLE_NAME)
       ) +
    geom_histogram(bins = 50)
```

**(c).** Extend the plot above by adding labels to the x-axis, y-axis, and title using the labs() function.

```{r}
#| eval: false
ggplot(housing, 
       aes(x = YOUR_VARIABLE_NAME)
       ) +
    geom_histogram(bins = 50) +
    labs(x = "YOUR_X_AXIS_LABEL", 
         y = "YOUR_Y_AXIS_LABEL", 
         title = "YOUR_TITLE"
         )
```

**(d).** Modify the x-axis so that prices are displayed in dollar format by adding `scale_x_continuous(labels = scales::dollar).` We have rotated the axis labels to make the numbers easier to read.

```{r}
#| eval: false

ggplot(housing, 
       aes(x = price)
       ) +
    geom_histogram(bins = 50) +
    YOUR_CODE_HERE +
    labs(x = "YOUR_X_AXIS_LABEL", 
         y = "YOUR_Y_AXIS_LABEL", 
         title = "YOUR_TITLE"
         ) +
    theme(
        axis.text.x = element_text(angle = 55, hjust = 1),
    )
```

**(e).** Add `fill = type` inside `aes()` to color the histogram by dwelling type and then create subplots by dwelling type.

```{r}
#| eval: false
ggplot(housing, 
       aes(x = price, 
           YOUR_CODE_HERE
           )
       ) +
    geom_histogram(bins = 50) +
    YOUR_CODE_HERE +
    labs(x = "YOUR_X_AXIS_LABEL", 
         y = "YOUR_Y_AXIS_LABEL", 
         title = "YOUR_TITLE"
         ) +
    theme(
        axis.text.x = element_text(angle = 55, hjust = 1),
    ) +
    YOUR_CODE_HERE
```

**(f).** What does the histogram tell you about price differences between dwelling types?


<!-- BEGIN PROFILE:r-teaching-guide -->
::: {.content-visible when-profile="r-teaching-guide"}

::: {.teaching-block}

::: {.teaching-block-header}
Teaching Note
:::

::: {.teaching-block-body}

ðŸŽ¯ **Learning Objective** 
Students should:

- Understand how histograms visualize the distribution of continuous variables
- Practice using `aes()` to map additional aesthetic dimensions like fill
- Use `facet_wrap()` to generate subplots for categorical comparisons
- Interpret distributional shape (e.g. skewness, modality) and relate it to real-world business insights

âœ…   **Core Concepts to Highlight**

- A histogram is for continuous data; bar plots are for categorical data
- `geom_histogram()` counts how many values fall into each bin
- `fill = type` adds color by category, while `facet_wrap(~ type)` breaks plots into small multiples
- `scale_x_continuous(labels = scales::dollar)` improves readability of financial data
- Distribution shape tells us about central tendency, spread, and skewness, all of which matter for pricing and segmentation

ðŸ’¬ **Suggested In-Class Prompts** (if needed)

NA

ðŸ“Œ **Common Misunderstandings**

- Confusing bar plots with histograms (especially when faceted or filled)
- Thinking `fill = type` adds numerical grouping, not realizing itâ€™s visual only unless grouped/faceted
- Histograms in R can combine two variables in faceted plots: `x = numeric`, `facet = categorical`
- Interpreting y-axis height as absolute frequency in faceted histograms (it's within-facet density)

:::

:::

:::
<!-- END PROFILE:r-teaching-guide -->

<!-- BEGIN PROFILE:r-solutions -->
::: {.content-visible when-profile="r-solutions" when-profile="r-teaching-guide"}

::: {.solution-block}

::: {.solution-block-header}
Solution
:::

::: {.solution-block-body}

**(a) Why is a histogram useful here?**

A histogram is useful for understanding the distribution of prices across properties. It shows how prices are spread out, where most of the listings fall, and whether there are outliers or skewed distributions.

- By plotting prices separately for each dwelling type, we can:
- Compare typical price ranges across types (e.g., Units vs. Houses).
- Spot differences in distribution shape (e.g., skewness, bimodality).
- Better understand market segmentation: do certain types dominate in certain price brackets?

**(b)**

```{r}
ggplot(housing, 
       aes(x = price)
       ) +
    geom_histogram(bins = 50)
```

**(c)** 

```{r}
ggplot(housing, 
       aes(x = price)
       ) +
    geom_histogram(bins = 50) +
    labs(
        x = "Price", 
        y = "Number of Listings", 
        title = "Distribution of Dwelling Prices"
    )
```

**(d)**
```{r}
ggplot(housing, 
       aes(x = price)
       ) +
    geom_histogram(bins = 50) +
    scale_x_continuous(labels = scales::dollar) +
    labs(
        x = "Price", 
        y = "Number of Listings", 
        title = "Distribution of Dwelling Prices"
    ) +
    theme(
        axis.text.x = element_text(angle = 55, hjust = 1)
    )
```

```{r}
ggplot(housing, 
       aes(x = price, fill = type)
       ) +
    geom_histogram(bins = 50) +
    scale_x_continuous(labels = scales::dollar) +
    labs(
        x = "Price", 
        y = "Density within Type", 
        title = "Prices by Dwelling Type"
    ) +
    theme(
        axis.text.x = element_text(angle = 55, hjust = 1)
    ) +
    facet_wrap(~ type)
```

**(f)**

The histogram reveals clear differences in price distributions across dwelling types:

- Apartments have the lowest prices, with most listings clustered below $1 million. The distribution is strongly right-skewed, indicating that while most apartments are affordable, a few are much more expensive.
- Houses span a much wider price range and dominate the middle of the market. Most listings fall between $500,000 and $1.5 million, but the distribution again shows right skew, with a notable number of high-end listings exceeding $2 million.
- Townhouses are tightly concentrated around $750,000 to $1.25 million, with fewer extreme values. Their distribution is narrower and more symmetric compared to the other two dwelling types.

Key takeaways:

- Houses are the most numerous and show the greatest variation in price.
- Apartments tend to be lower-priced, making them more accessible to entry-level buyers or investors.
- Townhouses occupy a mid-range niche, potentially appealing to buyers seeking a balance between space and affordability.

:::

:::

:::
<!-- END PROFILE:r-solutions -->